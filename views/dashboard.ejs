<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= ready && bot ? bot.username : 'Simulator Storm' %> - Dashboard</title>
    <link rel="stylesheet" href="/css/dashboard.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="hero-background"></div>
    
    <nav class="nav-bar">
        <div class="nav-container">
            <div class="nav-logo">
                <% if (ready && bot) { %>
                    <img src="<%= bot.avatar %>" alt="Logo" class="nav-logo-img">
                    <span><%= bot.username %></span>
                <% } else { %>
                    <span>Simulator Storm</span>
                <% } %>
            </div>
            <div class="nav-links">
                <a href="#stats" class="nav-link">Estatísticas</a>
                <a href="#faq" class="nav-link">FAQ</a>
                <a href="https://discord.com/api/oauth2/authorize?client_id=<%= process.env.APPLICATION_ID || '1442258129491329105' %>&permissions=8&scope=bot%20applications.commands" target="_blank" class="nav-btn">
                    <svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                    </svg>
                    Adicionar ao Servidor
                </a>
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Sistema de Torneios Discord</h1>
            <p class="hero-subtitle">Organize torneios competitivos com chaveamento automático, rankings e gerenciamento de partidas</p>
            <div class="hero-features">
                <div class="feature-badge">
                    <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                    </svg>
                    <span>Chaveamento Automático</span>
                </div>
                <div class="feature-badge">
                    <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span>Sistema de Ranking</span>
                </div>
                <div class="feature-badge">
                    <svg class="feature-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    <span>Gerenciamento Automático</span>
                </div>
            </div>
        </div>
    </section>

    <div class="container">
        <% if (ready && stats) { %>
            <section class="stats-section" id="stats">
                <h2 class="section-title">Estatísticas em Tempo Real</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon servers-icon"></div>
                        <div class="stat-info">
                            <h3 class="stat-value"><%= stats.totalGuilds %></h3>
                            <p class="stat-label">Servidores</p>
                        </div>
                        <div class="stat-background"></div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon users-icon"></div>
                        <div class="stat-info">
                            <h3 class="stat-value"><%= stats.totalUsers.toLocaleString('pt-BR') %></h3>
                            <p class="stat-label">Usuários</p>
                        </div>
                        <div class="stat-background"></div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon players-icon"></div>
                        <div class="stat-info">
                            <h3 class="stat-value"><%= stats.totalPlayers %></h3>
                            <p class="stat-label">Jogadores</p>
                        </div>
                        <div class="stat-background"></div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon tournaments-icon"></div>
                        <div class="stat-info">
                            <h3 class="stat-value"><%= stats.activeSimulators %></h3>
                            <p class="stat-label">Torneios Ativos</p>
                        </div>
                        <div class="stat-background"></div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon commands-icon"></div>
                        <div class="stat-info">
                            <h3 class="stat-value"><%= stats.totalCommands %></h3>
                            <p class="stat-label">Comandos</p>
                        </div>
                        <div class="stat-background"></div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon uptime-icon"></div>
                        <div class="stat-info">
                            <h3 class="stat-value"><%= stats.uptime %></h3>
                            <p class="stat-label">Tempo Online</p>
                        </div>
                        <div class="stat-background"></div>
                    </div>
                </div>
            </section>

            <div class="content-grid">
                <section class="card ranking-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <svg class="title-icon" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                            </svg>
                            Top 10 Jogadores
                        </h2>
                        <span class="card-badge">Ranking Global</span>
                    </div>
                    <div class="ranking-list">
                        <% if (rankGlobal && rankGlobal.length > 0) { %>
                            <% rankGlobal.forEach((player, index) => { %>
                                <div class="ranking-item">
                                    <div class="rank-position rank-<%= index + 1 %>">
                                        <% if (index === 0) { %>
                                            <svg class="medal-icon gold" viewBox="0 0 24 24" fill="currentColor">
                                                <circle cx="12" cy="8" r="3"></circle>
                                                <path d="M12 12L15 21H9L12 12Z"></path>
                                            </svg>
                                        <% } else if (index === 1) { %>
                                            <svg class="medal-icon silver" viewBox="0 0 24 24" fill="currentColor">
                                                <circle cx="12" cy="8" r="3"></circle>
                                                <path d="M12 12L15 21H9L12 12Z"></path>
                                            </svg>
                                        <% } else if (index === 2) { %>
                                            <svg class="medal-icon bronze" viewBox="0 0 24 24" fill="currentColor">
                                                <circle cx="12" cy="8" r="3"></circle>
                                                <path d="M12 12L15 21H9L12 12Z"></path>
                                            </svg>
                                        <% } %>
                                        <span class="rank-number">#<%= index + 1 %></span>
                                    </div>
                                    <div class="player-info">
                                        <span class="player-id"><%= (player.id || player.user_id || 'N/A').substring(0, 8) %>...</span>
                                        <div class="player-stats">
                                            <span class="wins"><%= player.wins || 0 %> vitórias</span>
                                        </div>
                                    </div>
                                </div>
                            <% }); %>
                        <% } else { %>
                            <div class="empty-state">
                                <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="12" y1="8" x2="12" y2="12"></line>
                                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                                </svg>
                                <p>Nenhum jogador no ranking ainda</p>
                            </div>
                        <% } %>
                    </div>
                </section>

                <section class="card servers-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <svg class="title-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="7" height="7"></rect>
                                <rect x="14" y="3" width="7" height="7"></rect>
                                <rect x="14" y="14" width="7" height="7"></rect>
                                <rect x="3" y="14" width="7" height="7"></rect>
                            </svg>
                            Servidores Conectados
                        </h2>
                        <span class="card-badge"><%= guilds.length %> servidores</span>
                    </div>
                    <div class="servers-list">
                        <% if (guilds && guilds.length > 0) { %>
                            <% guilds.slice(0, 8).forEach(guild => { %>
                                <div class="server-item">
                                    <% if (guild.icon) { %>
                                        <img src="<%= guild.icon %>" alt="<%= guild.name %>" class="server-icon">
                                    <% } else { %>
                                        <div class="server-icon-placeholder"><%= guild.name.charAt(0) %></div>
                                    <% } %>
                                    <div class="server-info">
                                        <span class="server-name"><%= guild.name %></span>
                                        <span class="server-members">
                                            <svg class="member-icon" viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                                            </svg>
                                            <%= guild.memberCount %>
                                        </span>
                                    </div>
                                </div>
                            <% }); %>
                        <% } else { %>
                            <div class="empty-state">
                                <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                                </svg>
                                <p>Nenhum servidor conectado</p>
                            </div>
                        <% } %>
                    </div>
                </section>
            </div>

            <section class="faq-section" id="faq">
                <h2 class="section-title">Perguntas Frequentes</h2>
                <div class="faq-grid">
                    <div class="faq-item">
                        <div class="faq-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                            </svg>
                        </div>
                        <h3 class="faq-question">Como adicionar o bot?</h3>
                        <p class="faq-answer">Clique no botão "Adicionar ao Servidor" no topo da página e selecione o servidor desejado.</p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"/>
                            </svg>
                        </div>
                        <h3 class="faq-question">Como criar um torneio?</h3>
                        <p class="faq-answer">Use os comandos /simulador1v1, /simulador2v2, /simulador3v3 ou /simulador4v4 para criar torneios com diferentes formatos.</p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
                            </svg>
                        </div>
                        <h3 class="faq-question">Quem pode criar torneios?</h3>
                        <p class="faq-answer">Apenas membros com o cargo configurado pelo comando /setup podem criar simuladores.</p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                            </svg>
                        </div>
                        <h3 class="faq-question">Como funciona o ranking?</h3>
                        <p class="faq-answer">Os jogadores ganham pontos ao vencer torneios. Há um ranking global e rankings locais por servidor.</p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"/>
                            </svg>
                        </div>
                        <h3 class="faq-question">O bot é gratuito?</h3>
                        <p class="faq-answer">Sim! O bot é completamente gratuito e de código aberto.</p>
                    </div>

                    <div class="faq-item">
                        <div class="faq-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z"/>
                            </svg>
                        </div>
                        <h3 class="faq-question">Preciso de ajuda?</h3>
                        <p class="faq-answer">Entre em contato através do Discord ou abra uma issue no GitHub do projeto.</p>
                    </div>
                </div>
            </section>
        <% } else { %>
            <section class="loading-section">
                <div class="loading-spinner large"></div>
                <p class="loading-text">Carregando dados do bot...</p>
            </section>
        <% } %>

        <footer class="footer">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="/health" target="_blank" class="footer-link">API Health</a>
                    <a href="/ping" target="_blank" class="footer-link">Ping</a>
                    <a href="https://discord.com/api/oauth2/authorize?client_id=<%= process.env.APPLICATION_ID || '1442258129491329105' %>&permissions=8&scope=bot%20applications.commands" target="_blank" class="footer-link">Adicionar Bot</a>
                </div>
                <p class="footer-copyright">Dashboard do Bot de Torneios Discord | Desenvolvido com dedicação</p>
            </div>
        </footer>
    </div>

    <script src="/js/dashboard.js"></script>
</body>
</html>
